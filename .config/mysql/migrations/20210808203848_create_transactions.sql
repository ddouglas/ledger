CREATE TABLE `transactions` (
    `item_id` VARCHAR(64) NOT NULL COLLATE 'utf8mb4_bin',
    `account_id` VARCHAR(64) NOT NULL COLLATE 'utf8mb4_bin',
    `transaction_id` VARCHAR(64) NOT NULL COLLATE 'utf8mb4_bin',
    `pending_transaction_id` VARCHAR(64) NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
    `category_id` VARCHAR(64) NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
    `name` VARCHAR(255) NOT NULL COLLATE 'utf8mb4_bin',
    `pending` TINYINT(1) NOT NULL,
    `has_receipt` TINYINT(1) NOT NULL DEFAULT 0,
    `receipt_type` ENUM('pdf', 'jpg') NULL,
    `payment_channel` ENUM('online', 'in store', 'other') NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
    `merchant_name` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
    `categories` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
    `unofficial_currency_code` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
    `iso_currency_code` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
    `amount` DOUBLE NOT NULL,
    `transaction_code` VARCHAR(64) NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
    `authorized_date` DATE NULL DEFAULT NULL,
    `authorized_datetime` DATETIME NULL DEFAULT NULL,
    `date` DATE NOT NULL,
    `datetime` DATETIME NULL DEFAULT NULL,
    `hidden_at` DATETIME NULL DEFAULT NULL,
    `deleted_at` DATETIME NULL DEFAULT NULL,
    `created_at` DATETIME NOT NULL,
    `updated_at` DATETIME NOT NULL,
    PRIMARY KEY (`item_id`, `account_id`, `transaction_id`) USING BTREE,
    INDEX `transactions_account_id_idx` (`account_id`) USING BTREE,
    INDEX `date` (`date`) USING BTREE,
    INDEX `pending` (`pending`) USING BTREE,
    INDEX `transaction_id` (`transaction_id`) USING BTREE,
    CONSTRAINT `transactions_account_id_accounts_id` FOREIGN KEY (`account_id`) REFERENCES `ledger`.`accounts` (`account_id`) ON UPDATE CASCADE ON DELETE CASCADE,
    CONSTRAINT `transactions_item_id_items_id_foreign` FOREIGN KEY (`item_id`) REFERENCES `ledger`.`user_items` (`item_id`) ON UPDATE CASCADE ON DELETE CASCADE
) COLLATE = 'utf8mb4_bin' ENGINE = InnoDB;